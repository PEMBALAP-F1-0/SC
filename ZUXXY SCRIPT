local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "ðŸ’ SCRIPT BY ZUXXYðŸ’ ",
   Icon = 0, -- Icon in Topbar. Can use Lucide Icons (string) or Roblox Image (number). 0 to use no icon (default).
   LoadingTitle = "ðŸ’ SPACIAL SCRIPT FOR VIP USERSðŸ’ ",
   LoadingSubtitle = "BY ZUXXY",
   ShowText = "Rayfield", -- for mobile users to unhide rayfield, change if you'd like
   Theme = "Default", -- Check https://docs.sirius.menu/rayfield/configuration/themes

   ToggleUIKeybind = "K", -- The keybind to toggle the UI visibility (string like "K" or Enum.KeyCode)

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false, -- Prevents Rayfield from warning when the script has a version mismatch with the interface

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil, -- Create a custom folder for your hub/game
      FileName = "Big Hub"
   },

   Discord = {
      Enabled = false, -- Prompt the user to join your Discord server if their executor supports it
      Invite = "noinvitelink", -- The Discord invite code, do not include discord.gg/. E.g. discord.gg/ ABCD would be ABCD
      RememberJoins = true -- Set this to false to make them join the discord every time they load it up
   },

   KeySystem = false, -- Set this to true to use our key system
   KeySettings = {
      Title = "Untitled",
      Subtitle = "Key System",
      Note = "No method of obtaining the key is provided", -- Use this to tell the user how to get a key
      FileName = "Key", -- It is recommended to use something unique as other scripts using Rayfield may overwrite your key file
      SaveKey = true, -- The user's key will be saved, but if you change the key, they will be unable to use your script
      GrabKeyFromSite = false, -- If this is true, set Key below to the RAW site you would like Rayfield to get the key from
      Key = {"Hello"} -- List of keys that will be accepted by the system, can be RAW file links (pastebin, github etc) or simple strings ("hello","key22")
   }
})

local MainTab = Window:CreateTab("MAINðŸ ", nil) -- Title, Image
local MainSection = MainTab:CreateSection("SCRIPT FOR PVP")

local Toggle = MainTab:CreateToggle({
   Name = "TELEPORT NEAREST GUI",
   CurrentValue = false,
   Flag = "Toggle1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
       if Value then
    loadstring(game:HttpGet("https://raw.githubusercontent.com/PEMBALAP-F1-0/SC/refs/heads/main/TELEPORT%20HUB"))()
  elseif not Value then
    -- KODE UNTUK MENONAKTIFKAN FITUR
    -- Skrip untuk menghilangkan GUI "TeleportToggle"
    local Player = game:GetService("Players").LocalPlayer
    local PlayerGui = Player:WaitForChild("PlayerGui")
    
    -- Cari ScreenGui dengan nama "TeleportToggle"
    local teleportGui = PlayerGui:FindFirstChild("TeleportToggle")
    
    -- Jika ditemukan, hancurkan (hapus)
    if teleportGui then
        teleportGui:Destroy()
        print("GUI TeleportToggle telah dihapus.")
    else
        print("GUI TeleportToggle tidak ditemukan.")
    end
  end
   end,
})

local Toggle = MainTab:CreateToggle({
   Name = "CAMLOCK",
   CurrentValue = false,
   Flag = "Toggle2", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
      if Value then
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local LocalPlayer = Players.LocalPlayer
    local Mouse = game.Players.LocalPlayer:GetMouse()
    local CamlockState = false
    local Prediction = 0.1768521
    local HorizontalPrediction = 0.111076110
    local VerticalPrediction = 0.11034856
    local XPrediction = 20
    local YPrediction = 20
    
    local Players = game:GetService("Players")	
    local LP = Players.LocalPlayer	
    local Mouse = LP:GetMouse()	
    
    local Locked = true
    
    getgenv().Key = "q"
    
    function FindNearestEnemy()
        local ClosestDistance, ClosestPlayer = math.huge, nil
        local CenterPosition =
            Vector2.new(
            game:GetService("GuiService"):GetScreenResolution().X / 2,
            game:GetService("GuiService"):GetScreenResolution().Y / 2
        )
    
        for _, Player in ipairs(game:GetService("Players"):GetPlayers()) do
            if Player ~= LocalPlayer then
                local Character = Player.Character
                if Character and Character:FindFirstChild("HumanoidRootPart") and Character.Humanoid.Health > 0 then
                    local Position, IsVisibleOnViewport =
                        game:GetService("Workspace").CurrentCamera:WorldToViewportPoint(Character.HumanoidRootPart.Position)
    
                    if IsVisibleOnViewport then
                        local Distance = (CenterPosition - Vector2.new(Position.X, Position.Y)).Magnitude
                        if Distance < ClosestDistance then
                            ClosestPlayer = Character.HumanoidRootPart
                            ClosestDistance = Distance
                        end
                    end
                end
            end
        end
    
        return ClosestPlayer
    end
    
    local enemy = nil
    -- Function to aim the camera at the nearest enemy's HumanoidRootPart
    RunService.Heartbeat:Connect(
        function()
            if CamlockState == true then
                if enemy then
                    local camera = workspace.CurrentCamera
                    camera.CFrame = CFrame.new(camera.CFrame.p, enemy.Position + enemy.Velocity * Prediction)
                end
            end
        end
    )
    
    Mouse.KeyDown:Connect(function(k)	
        if k == getgenv().Key then	
                Locked = not Locked	
                if Locked then	
                    enemy = FindNearestEnemy()
                    CamlockState = true
                 else	
                    if enemy ~= nil then	
                        enemy = nil	
                        CamlockState = false
                    end	
                end	
        end	
    end)
    
    local Rushex = Instance.new("ScreenGui")
    local Frame = Instance.new("Frame")
    local UICorner = Instance.new("UICorner")
    local Logo = Instance.new("ImageLabel")
    local TextButton = Instance.new("TextButton")
    local UICorner_2 = Instance.new("UICorner")
    
    --Properties:
    
    Rushex.Name = "CAMLOCK"
    Rushex.Parent = game.CoreGui
    Rushex.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    Frame.Parent = Rushex
    Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)  -- Background set to white
    Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Frame.BorderSizePixel = 0
    Frame.Position = UDim2.new(0.133798108, 0, 0.20107238, 0)
    Frame.Size = UDim2.new(0, 202, 0, 70)
    Frame.Active = true
    Frame.Draggable = true
    
    local function TopContainer()
    	Frame.Position = UDim2.new(0.5, -Frame.AbsoluteSize.X / 2, 0, -Frame.AbsoluteSize.Y / 2)
    end
    
    TopContainer()
    Frame:GetPropertyChangedSignal("AbsoluteSize"):Connect(TopContainer)
    
    UICorner.Parent = Frame
    
    Logo.Name = "Logo"
    Logo.Parent = Frame
    Logo.BackgroundColor3 = Color3.fromRGB(100, 255, 100)
    Logo.BackgroundTransparency = 3.000
    Logo.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Logo.BorderSizePixel = 0
    Logo.Position = UDim2.new(0.326732665, 0, 0, 0)
    Logo.Size = UDim2.new(0, 70, 0, 70)
    Logo.Image = "rbxassetid://830610397"
    Logo.ImageTransparency = 0.300
    
    TextButton.Parent = Frame
    TextButton.BackgroundColor3 = Color3.fromRGB(75, 80, 255)
    TextButton.BackgroundTransparency = 5.000
    TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    TextButton.BorderSizePixel = 0
    TextButton.Position = UDim2.new(0.0792079195, 0, 0.18571429, 0)
    TextButton.Size = UDim2.new(0, 170, 0, 44)
    TextButton.Font = Enum.Font.SourceSansSemibold
    TextButton.Text = "CAMLOCK"
    TextButton.TextColor3 = Color3.fromRGB(0, 0, 0)  -- Text color changed to black
    TextButton.TextScaled = true
    TextButton.TextSize = 18.000
    TextButton.TextWrapped = true
    local state = true
    TextButton.MouseButton1Click:Connect(
        function()
            state = not state
            if not state then
                TextButton.Text = "ON"
                CamlockState = true
                enemy = FindNearestEnemy()
            else
                TextButton.Text = "OFF"
                CamlockState = false
                enemy = nil
            end
        end
    )
    
    -- Function to hide the loading screen after a certain duration
    local function HideLoadingScreen()
        LoadingScreen:Destroy()
    end
 elseif not Value then
  local CoreGui = game:GetService("CoreGui")

  local rushexGui = CoreGui:FindFirstChild("CAMLOCK")
  
  if rushexGui then
      rushexGui:Destroy()
      print("GUI 'Rushex' telah dihapus.")
  else
      print("GUI 'Rushex' tidak ditemukan.")
    end
  end
   end,
})

local Button = MainTab:CreateButton({
   Name = "TELEPORT DEPAN",
   Callback = function()
   -- Tempatkan ini di StarterGui sebagai LocalScript
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Buat ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ForwardTeleportGui"
screenGui.Parent = playerGui

-- Buat Tombol
local button = Instance.new("TextButton")
button.Name = "ForwardTeleportButton"
button.Size = UDim2.new(0, 70, 0, 70)
button.Position = UDim2.new(0, 20, 0, 20) -- Pojok kiri atas
button.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Text = "FORWARD\n+60"
button.Font = Enum.Font.SourceSansBold
button.TextSize = 14
button.TextWrapped = true
button.BorderSizePixel = 0
button.ZIndex = 10

-- Tambahkan corner rounding
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 15)
corner.Parent = button

-- Tambahkan shadow effect
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(150, 50, 50)
shadow.Thickness = 3
shadow.Parent = button

button.Parent = screenGui

-- Variabel untuk drag & drop
local dragging = false
local dragInput
local dragStart
local startPos

-- Fungsi untuk update posisi tombol
local function update(input)
	local delta = input.Position - dragStart
	button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

-- Event untuk mulai drag
button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = button.Position
		
		-- Efek visual saat didrag
		button.BackgroundTransparency = 0.3
		
		-- Capture input selama drag
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
				button.BackgroundTransparency = 0
			end
		end)
	end
end)

-- Event selama drag
button.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

-- Update posisi selama drag
game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- Fungsi teleport ke depan
local function teleportForward()
	local character = player.Character
	if not character then return end
	
	local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
	if not humanoidRootPart then return end
	
	-- Dapatkan arah hadapan karakter
	local currentCFrame = humanoidRootPart.CFrame
	local forwardDirection = currentCFrame.LookVector
	
	-- Hitung posisi baru (60 stud ke depan)
	local teleportDistance = 60
	local newPosition = humanoidRootPart.Position + (forwardDirection * teleportDistance)
	
	-- Eksekusi teleport
	humanoidRootPart.CFrame = CFrame.new(newPosition, newPosition + forwardDirection)
	
	-- Efek visual saat diklik
	local originalColor = button.BackgroundColor3
	button.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
	button.Text = "TELEPORTING..."
	
	-- Reset setelah 0.3 detik
	delay(0.3, function()
		button.BackgroundColor3 = originalColor
		button.Text = "FORWARD\n+60"
	end)
end

-- Hubungkan fungsi teleport ke klik (hanya jika tidak sedang drag)
button.MouseButton1Click:Connect(function()
	if not dragging then
		teleportForward()
	end
end)

-- Handle touch devices
button.TouchTap:Connect(function()
	if not dragging then
		teleportForward()
	end
end)

print("Tombol Teleport Forward (+60 stud) telah dibuat! Drag untuk memindahkan posisi.")
   end,
})

local Button = MainTab:CreateButton({
   Name = "TELEPORT RANDOM",
   Callback = function()
   local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Buat ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportGui"
screenGui.Parent = playerGui

-- Buat Tombol
local button = Instance.new("TextButton")
button.Name = "TeleportButton"
button.Size = UDim2.new(0, 60, 0, 60)
button.Position = UDim2.new(0, 20, 0, 20) -- Pojok kiri atas
button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Text = "TELEPORT"
button.Font = Enum.Font.SourceSansBold
button.TextSize = 14
button.BorderSizePixel = 0
button.ZIndex = 10

-- Tambahkan corner rounding
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = button

-- Tambahkan shadow effect
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(0, 85, 127)
shadow.Thickness = 3
shadow.Parent = button

button.Parent = screenGui

-- Variabel untuk drag & drop
local dragging = false
local dragInput
local dragStart
local startPos

-- Fungsi untuk update posisi tombol
local function update(input)
	local delta = input.Position - dragStart
	button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

-- Event untuk mulai drag
button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = button.Position
		
		-- Capture input selama drag
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

-- Event selama drag
button.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

-- Update posisi selama drag
game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- Fungsi teleport
local function teleportRandom()
	local character = player.Character
	if not character then return end
	
	local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
	if not humanoidRootPart then return end
	
	-- Arah dan jarak teleport (3-5 stud)
	local directions = {
		Vector3.new(-60, 0, 0),  -- Kiri
		Vector3.new(60, 0, 0),   -- Kanan
		Vector3.new(0, 0, 60),   -- Depan
		Vector3.new(0, 0, -60)   -- Belakang
	}
	
	-- Pilih arah acak
	local randomIndex = math.random(1, #directions)
	local newPosition = humanoidRootPart.Position + directions[randomIndex]
	
	-- Eksekusi teleport
	humanoidRootPart.CFrame = CFrame.new(newPosition)
	
	-- Efek visual saat diklik
	local originalColor = button.BackgroundColor3
	button.BackgroundColor3 = Color3.fromRGB(0, 140, 220)
	
	-- Reset warna setelah 0.1 detik
	delay(0.1, function()
		button.BackgroundColor3 = originalColor
	end)
end

-- Hubungkan fungsi teleport ke klik (hanya jika tidak sedang drag)
button.MouseButton1Click:Connect(function()
	if not dragging then
		teleportRandom()
	end
end)

-- Handle touch devices
button.TouchTap:Connect(function()
	if not dragging then
		teleportRandom()
	end
end)

print("Tombol Teleport telah dibuat! Drag untuk memindahkan posisi.")
   end,
})

local PlayerTab = Window:CreateTab("PLAYERðŸ‘¤", nil) -- Title, Image
local PlayerSection = PlayerTab:CreateSection("MAIN CHARACTER MENU")

_G.WalkWater = false

local Toggle = PlayerTab:CreateToggle({
   Name = "Walk On Water",
   CurrentValue = true,
   Flag = "WalkWater",
   Callback = function(Value)
      _G.WalkWater = Value
      
      -- Thread untuk mengubah ukuran water plane
      task.spawn(function()
         while _G.WalkWater do
            pcall(function()
               local waterPlane = game:GetService("Workspace").Map:FindFirstChild("WaterBase-Plane")
               if waterPlane then
                  waterPlane.Size = Vector3.new(1000, 112, 1000)
               end
            end)
            task.wait()
         end
         
         -- Kembalikan ke ukuran normal ketika loop selesai
         pcall(function()
            local waterPlane = game:GetService("Workspace").Map:FindFirstChild("WaterBase-Plane")
            if waterPlane then
               waterPlane.Size = Vector3.new(1000, 80, 1000)
            end
         end)
      end)
      
      print("Walk On Water: " .. tostring(Value))
   end,
})

local currentSpeed = 155
local isSpeedEnabled = false

-- Referensi ke player dan humanoid
local player = game:GetService("Players").LocalPlayer
local humanoid
local speedChangedFlag

-- Fungsi untuk mengatur kecepatan
local function setSpeed(character)
    if not character or not isSpeedEnabled then return end
    
    humanoid = character:WaitForChild("Humanoid", 5) 
    
    if humanoid and humanoid:IsA("Humanoid") then
        -- Menghindari pengulangan koneksi
        if not humanoid:FindFirstChild("SpeedChanged") then
            speedChangedFlag = Instance.new("BoolValue", humanoid)
            speedChangedFlag.Name = "SpeedChanged"
            
            humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
                if humanoid.WalkSpeed ~= currentSpeed and isSpeedEnabled then
                    humanoid.WalkSpeed = currentSpeed
                end
            end)
        end
        
        humanoid.WalkSpeed = currentSpeed
    end
end

-- Menerapkan speed saat karakter baru muncul
player.CharacterAdded:Connect(setSpeed)

-- Slider untuk mengatur kecepatan
local SpeedSlider = PlayerTab:CreateSlider({
    Name = "Kecepatan Berjalan",
    Range = {16, 500},
    Increment = 1,
    Suffix = "Studs/detik",
    CurrentValue = currentSpeed,
    Flag = "SpeedValue",
    Callback = function(value)
        currentSpeed = value
        -- Terapkan perubahan kecepatan jika speedhack aktif
        if isSpeedEnabled and player.Character then
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = currentSpeed
            end
        end
    end,
})

-- Toggle untuk mengaktifkan/menonaktifkan speedhack
local SpeedToggle = PlayerTab:CreateToggle({
    Name = "Aktifkan Speedhack",
    CurrentValue = isSpeedEnabled,
    Flag = "SpeedToggle",
    Callback = function(value)
        isSpeedEnabled = value
        
        if player.Character then
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if humanoid then
                if isSpeedEnabled then
                    humanoid.WalkSpeed = currentSpeed
                else
                    humanoid.WalkSpeed = 16 -- Kembali ke kecepatan normal
                end
            end
        end
    end,
})

local CombatTab = Window:CreateTab("COMBATâš”ï¸ | ESPðŸ§©", nil)
local CombatSection = CombatTab:CreateSection("Auto Attack Settings")

-- Variabel global untuk status auto attack
_G.FastAttack = false

local Toggle = CombatTab:CreateToggle({
   Name = "Auto Attack (Kill Aura)",
   CurrentValue = true,
   Flag = "AutoAttack",
   Callback = function(Value)
      _G.FastAttack = Value
      
      if _G.FastAttack then
         -- Memulai sistem fast attack ketika toggle diaktifkan
         task.spawn(function()
            local _ENV = (getgenv or getrenv or getfenv)()

            local function SafeWaitForChild(parent, childName)
                local success, result = pcall(function()
                    return parent:WaitForChild(childName)
                end)
                if not success or not result then
                    warn("noooooo: " .. childName)
                end
                return result
            end

            local function WaitChilds(path, ...)
                local last = path
                for _, child in {...} do
                    last = last:FindFirstChild(child) or SafeWaitForChild(last, child)
                    if not last then break end
                end
                return last
            end

            local VirtualInputManager = game:GetService("VirtualInputManager")
            local CollectionService = game:GetService("CollectionService")
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local TeleportService = game:GetService("TeleportService")
            local RunService = game:GetService("RunService")
            local Players = game:GetService("Players")
            local Player = Players.LocalPlayer

            if not Player then
                warn("KhÃ´ng tÃ¬m tháº¥y ngÆ°á»i chÆ¡i cá»¥c bá»™.")
                return
            end

            local Remotes = SafeWaitForChild(ReplicatedStorage, "Remotes")
            if not Remotes then return end

            local Validator = SafeWaitForChild(Remotes, "Validator")
            local CommF = SafeWaitForChild(Remotes, "CommF_")
            local CommE = SafeWaitForChild(Remotes, "CommE")

            local ChestModels = SafeWaitForChild(workspace, "ChestModels")
            local WorldOrigin = SafeWaitForChild(workspace, "_WorldOrigin")
            local Characters = SafeWaitForChild(workspace, "Characters")
            local Enemies = SafeWaitForChild(workspace, "Enemies")
            local Map = SafeWaitForChild(workspace, "Map")

            local EnemySpawns = SafeWaitForChild(WorldOrigin, "EnemySpawns")
            local Locations = SafeWaitForChild(WorldOrigin, "Locations")

            local RenderStepped = RunService.RenderStepped
            local Heartbeat = RunService.Heartbeat
            local Stepped = RunService.Stepped

            local Modules = SafeWaitForChild(ReplicatedStorage, "Modules")
            local Net = SafeWaitForChild(Modules, "Net")

            local sethiddenproperty = sethiddenproperty or function(...) return ... end
            local setupvalue = setupvalue or (debug and debug.setupvalue)
            local getupvalue = getupvalue or (debug and debug.getupvalue)

            local Settings = {
                AutoClick = true,
                ClickDelay = 0
            }

            if _ENV.rz_FastAttack then
                return _ENV.rz_FastAttack
            end

            local FastAttack = {
                Distance = 100,
                attackMobs = true,
                attackPlayers = true,
                Equipped = nil
            }

            local RegisterAttack = SafeWaitForChild(Net, "RE/RegisterAttack")
            local RegisterHit = SafeWaitForChild(Net, "RE/RegisterHit")

            local function IsAlive(character)
                return character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0
            end

            local function ProcessEnemies(OthersEnemies, Folder)
                local BasePart = nil
                for _, Enemy in Folder:GetChildren() do
                    local Head = Enemy:FindFirstChild("Head")
                    if Head and IsAlive(Enemy) and Player:DistanceFromCharacter(Head.Position) < FastAttack.Distance then
                        if Enemy ~= Player.Character then
                            table.insert(OthersEnemies, { Enemy, Head })
                            BasePart = Head
                        end
                    end
                end
                return BasePart
            end

            function FastAttack:Attack(BasePart, OthersEnemies)
                if not BasePart or #OthersEnemies == 0 then return end
                RegisterAttack:FireServer(Settings.ClickDelay or 0)
                RegisterHit:FireServer(BasePart, OthersEnemies)
            end

            function FastAttack:AttackNearest()
                local OthersEnemies = {}
                local Part1 = ProcessEnemies(OthersEnemies, Enemies)
                local Part2 = ProcessEnemies(OthersEnemies, Characters)

                local character = Player.Character
                if not character then return end
                local equippedWeapon = character:FindFirstChildOfClass("Tool")

                if equippedWeapon and equippedWeapon:FindFirstChild("LeftClickRemote") then
                    for _, enemyData in ipairs(OthersEnemies) do
                        local enemy = enemyData[1]
                        local direction = (enemy.HumanoidRootPart.Position - character:GetPivot().Position).Unit
                        pcall(function()
                            equippedWeapon.LeftClickRemote:FireServer(direction, 1)
                        end)
                    end
                elseif #OthersEnemies > 0 then
                    self:Attack(Part1 or Part2, OthersEnemies)
                else
                    task.wait(0)
                end
            end

            function FastAttack:BladeHits()
                local Equipped = IsAlive(Player.Character) and Player.Character:FindFirstChildOfClass("Tool")
                if Equipped and Equipped.ToolTip ~= "Gun" then
                    self:AttackNearest()
                else
                    task.wait(0)
                end
            end

            -- Loop utama untuk auto attack
            while _G.FastAttack do
                if Settings.AutoClick then
                    FastAttack:BladeHits()
                end
                task.wait(Settings.ClickDelay)
            end
         end)
      else
         -- Hentikan sistem fast attack ketika toggle dimatikan
         print("Auto Attack Dimatikan")
      end
      
      print("Auto Attack: " .. tostring(Value))
   end,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local ESPEnabled = false
local ESPFolders = {} -- Untuk menyimpan folder ESP setiap pemain

-- Fungsi untuk membuat ESP
local function createESP(player)
    if not player.Character then return end
    if not player.Character:FindFirstChild("Head") then return end
    
    -- Hapus ESP lama jika ada
    if ESPFolders[player] then
        ESPFolders[player]:Destroy()
        ESPFolders[player] = nil
    end
    
    -- Buat folder untuk menyimpan ESP components
    local espFolder = Instance.new("Folder")
    espFolder.Name = player.Name .. "_ESP"
    espFolder.Parent = player.Character
    
    local esp = Instance.new("BillboardGui")
    esp.Name = "ESP"
    esp.Adornee = player.Character.Head
    esp.Size = UDim2.new(0, 200, 0, 50)
    esp.StudsOffset = Vector3.new(0, 3, 0)
    esp.AlwaysOnTop = true
    esp.Parent = espFolder

    local frame = Instance.new("Frame", esp)
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundColor3 = Color3.new(0, 0, 0)
    frame.BackgroundTransparency = 0.5

    local nameLabel = Instance.new("TextLabel", frame)
    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = player.Name
    nameLabel.TextColor3 = Color3.new(1, 1, 1)
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextSize = 14

    local healthLabel = Instance.new("TextLabel", frame)
    healthLabel.Size = UDim2.new(1, 0, 0.5, 0)
    healthLabel.Position = UDim2.new(0, 0, 0.5, 0)
    healthLabel.BackgroundTransparency = 1
    healthLabel.TextColor3 = Color3.new(1, 0, 0)
    healthLabel.Font = Enum.Font.Gotham
    healthLabel.TextSize = 12

    -- Simpan folder ESP
    ESPFolders[player] = espFolder
    
    -- Update ESP setiap frame
    local connection
    connection = game:GetService("RunService").RenderStepped:Connect(function()
        if not ESPEnabled then
            connection:Disconnect()
            return
        end
        
        if player.Character and player.Character:FindFirstChild("Humanoid") and player.Character:FindFirstChild("HumanoidRootPart") and
           LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local humanoid = player.Character.Humanoid
            healthLabel.Text = "Health: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)
            local distance = (LocalPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).magnitude
            nameLabel.Text = player.Name .. " - " .. math.floor(distance) .. " studs"
        else
            connection:Disconnect()
            if ESPFolders[player] then
                ESPFolders[player]:Destroy()
                ESPFolders[player] = nil
            end
        end
    end)
end

-- Fungsi untuk menghapus ESP
local function removeESP(player)
    if ESPFolders[player] then
        ESPFolders[player]:Destroy()
        ESPFolders[player] = nil
    end
end

-- Fungsi untuk toggle ESP
local function toggleESP(value)
    ESPEnabled = value
    
    if value then
        -- Buat ESP untuk semua pemain
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                if player.Character then
                    createESP(player)
                end
                
                -- Hubungkan event untuk karakter yang dimuat nanti
                player.CharacterAdded:Connect(function(character)
                    if ESPEnabled then
                        wait(1) -- Tunggu karakter sepenuhnya dimuat
                        createESP(player)
                    end
                end)
            end
        end
    else
        -- Hapus semua ESP
        for player, _ in pairs(ESPFolders) do
            removeESP(player)
        end
    end
end

CombatTab:CreateToggle({
    Name = "Enable ESP",
    CurrentValue = false,
    Flag = "ESPEnabled",
    Callback = function(value)
        toggleESP(value)
    end,
})

-- Handle pemain baru yang bergabung
Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        if ESPEnabled then
            wait(1) -- Tunggu karakter sepenuhnya dimuat
            createESP(player)
        end
    end)
end)

-- Handle ketika pemain keluar
Players.PlayerRemoving:Connect(function(player)
    removeESP(player)
end)

-- Handle ketika karakter dimatikan
LocalPlayer.CharacterRemoving:Connect(function()
    if ESPEnabled then
        -- Nonaktifkan sementara ESP saat karakter lokal mati
        local wasEnabled = ESPEnabled
        toggleESP(false)
        
        -- Aktifkan kembali setelah respawn
        LocalPlayer.CharacterAdded:Wait()
        wait(1)
        if wasEnabled then
            toggleESP(true)
        end
    end
end)

local ShopTab = Window:CreateTab("ShopðŸ›’", nil) -- Title, Image
local Section = ShopTab:CreateSection("SHOP NJING")

local Label = ShopTab:CreateLabel("Fighting Style", nil, Color3.fromRGB(255, 255, 255), false) -- Title, Icon, Color, IgnoreTheme

local Button = ShopTab:CreateButton({
   Name = "Buy Black Leg $150,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyBlackLeg")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Electro $550,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyElectro")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Water Kung Fu $750,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyFishmanKarate")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Dragon Claw 1,500F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BlackbeardReward","DragonClaw","1")
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BlackbeardReward","DragonClaw","2")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Superhuman $3,000,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuySuperhuman")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Death Step $5,000,000 5,000F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyDeathStep")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Sharkman Karate $2,500,000 5,000F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuySharkmanKarate",true)
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuySharkmanKarate")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Electric Claw $3,000,000 5,000F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyElectricClaw")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Dragon Talon $3,000,000 5,000F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyDragonTalon")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy God Human $5,000,000 5,000F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyGodhuman")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Buy Sanguine Art $5,000,000 5,000F",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuySanguineArt", true)
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuySanguineArt")
   end,
})

local Label = ShopTab:CreateLabel("Sword", nil, Color3.fromRGB(255, 255, 255), false) -- Title, Icon, Color, IgnoreTheme

local Button = ShopTab:CreateButton({
   Name = "Cutlass $1,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Cutlass")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Katana $1,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Katana")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Iron Mace $25,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Iron Mace")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Dual Katana $12,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Duel Katana")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Triple Katana $60,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Triple Katana")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Pipe $100,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Pipe")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Dual-Headed Blade $400,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Dual-Headed Blade")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Bisento $1,200,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Bisento")
   end,
})

local Button = ShopTab:CreateButton({
   Name = "Soul Cane $750,000",
   Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyItem","Soul Cane")
   end,
})

Rayfield:LoadConfiguration